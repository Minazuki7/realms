/* ============= EXTREME FANTASY MODE: UNHINGED GAME-LIKE AESTHETIC ============= */

/* LIGHT MODE: Magical Journey with Flying Fairies */
:root:not(.dark) .fantasy-mode {
  --fantasy-light-bg: #e8d5ff;
  --fantasy-light-bg-accent: #f5d9ff;
  --fantasy-light-primary: #9d4edd;
  --fantasy-light-accent: #c77dff;
  --fantasy-light-fairy-cyan: #00d9ff;
  --fantasy-light-fairy-pink: #ff006e;
  --fantasy-light-fairy-purple: #b5179e;
  --fantasy-light-glow: #00d9ff;
  --fantasy-light-card: rgba(255, 255, 255, 0.7);
}

/* DARK MODE: Berserk/Dark Souls/Elden Ring Horror */
:root.dark .fantasy-mode {
  --fantasy-dark-bg: #0a0a0a;
  --fantasy-dark-bg-accent: #1a1a1a;
  --fantasy-dark-primary: #8b0000;
  --fantasy-dark-accent: #dc143c;
  --fantasy-dark-blood-red: #ff0000;
  --fantasy-dark-purple: #2d0052;
  --fantasy-dark-glow: #8b0000;
  --fantasy-dark-card: rgba(20, 0, 10, 0.9);
}

/* ============= EXTREME ANIMATIONS ============= */

/* Floating Fairies - Light Mode */
@keyframes fairy-float {
  0%,
  100% {
    transform: translateY(0px) translateX(0px) rotate(0deg);
    opacity: 1;
  }
  25% {
    transform: translateY(-20px) translateX(15px) rotate(45deg);
  }
  50% {
    transform: translateY(-40px) translateX(-10px) rotate(-45deg);
    opacity: 0.8;
  }
  75% {
    transform: translateY(-20px) translateX(20px) rotate(45deg);
  }
}

@keyframes fairy-sparkle {
  0%,
  100% {
    opacity: 0.6;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.2);
  }
}

@keyframes blood-drip {
  0% {
    transform: translateY(-100%);
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  90% {
    opacity: 1;
  }
  100% {
    transform: translateY(100vh);
    opacity: 0;
  }
}

@keyframes blood-splatter {
  0% {
    transform: scale(0) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: scale(1) rotate(360deg);
    opacity: 0;
  }
}

@keyframes chaos-shake {
  0%,
  100% {
    transform: translate(0, 0) rotate(0deg);
  }
  10% {
    transform: translate(-2px, 2px) rotate(-0.5deg);
  }
  20% {
    transform: translate(2px, -2px) rotate(0.5deg);
  }
  30% {
    transform: translate(-1px, -1px) rotate(-0.5deg);
  }
  40% {
    transform: translate(1px, 1px) rotate(0.5deg);
  }
}

@keyframes pulsing-glow-light {
  0%,
  100% {
    box-shadow: 0 0 10px rgba(0, 217, 255, 0.3), 0 0 20px rgba(157, 78, 221, 0.2);
  }
  50% {
    box-shadow: 0 0 20px rgba(0, 217, 255, 0.6), 0 0 40px rgba(157, 78, 221, 0.4);
  }
}

@keyframes pulsing-glow-dark {
  0%,
  100% {
    box-shadow: 0 0 10px rgba(255, 0, 0, 0.3), 0 0 20px rgba(139, 0, 0, 0.2);
  }
  50% {
    box-shadow: 0 0 20px rgba(255, 0, 0, 0.6), 0 0 40px rgba(139, 0, 0, 0.4);
  }
}

@keyframes item-bounce {
  0%,
  100% {
    transform: translateY(0px) scale(1);
  }
  50% {
    transform: translateY(-20px) scale(1.05);
  }
}

@keyframes unlock-burst {
  0% {
    transform: scale(0) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: scale(2) rotate(360deg);
    opacity: 0;
  }
}

/* ============= FANTASY CONTAINER ============= */

.fantasy-container {
  position: relative;
  overflow: hidden;
}

.fantasy-mode:not(.dark) .fantasy-container {
  background: linear-gradient(
    135deg,
    var(--fantasy-light-bg) 0%,
    var(--fantasy-light-bg-accent) 50%,
    var(--fantasy-light-bg) 100%
  );
  background-size: 400% 400%;
  animation: gradient-shift 8s ease infinite;
}

.fantasy-mode.dark .fantasy-container {
  background: linear-gradient(
    135deg,
    var(--fantasy-dark-bg) 0%,
    var(--fantasy-dark-bg-accent) 50%,
    var(--fantasy-dark-bg) 100%
  );
  background-size: 400% 400%;
  animation: gradient-shift 8s ease infinite;
}

@keyframes gradient-shift {
  0%,
  100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

/* ============= FAIRY ELEMENTS - LIGHT MODE ============= */

.fairy-float {
  position: fixed;
  pointer-events: none;
  animation: fairy-float var(--duration, 8s) ease-in-out infinite;
  font-size: 2rem;
}

.fairy-float::after {
  content: attr(data-sparkle);
  position: absolute;
  animation: fairy-sparkle 1.5s ease-in-out infinite;
}

/* ============= BLOOD EFFECTS - DARK MODE ============= */

.blood-drip {
  position: fixed;
  width: 3px;
  height: 20px;
  background: linear-gradient(to bottom, #ff0000, #8b0000);
  border-radius: 50%;
  pointer-events: none;
  animation: blood-drip 4s linear infinite;
  opacity: 0.7;
}

.blood-splatter {
  position: fixed;
  width: 30px;
  height: 30px;
  pointer-events: none;
  font-size: 1.5rem;
  animation: blood-splatter 2s ease-out;
  opacity: 0;
}

/* ============= GAME ITEM CARDS ============= */

.game-item-card {
  position: relative;
  border-radius: 0.5rem;
  overflow: hidden;
  transition: all 0.3s ease;
  border: 2px solid;
  padding: 1.5rem;
  cursor: pointer;
  animation: pulsing-glow-light 3s ease-in-out infinite;
}

.fantasy-mode:not(.dark) .game-item-card {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.8), rgba(197, 125, 255, 0.1));
  border-color: var(--fantasy-light-fairy-cyan);
  color: var(--fantasy-light-primary);
}

.fantasy-mode.dark .game-item-card {
  background: linear-gradient(135deg, rgba(30, 0, 15, 0.9), rgba(139, 0, 0, 0.1));
  border-color: var(--fantasy-dark-blood-red);
  color: var(--fantasy-dark-accent);
  animation: pulsing-glow-dark 3s ease-in-out infinite;
}

.game-item-card:hover {
  transform: scale(1.05) rotateY(5deg);
  animation: chaos-shake 0.3s ease;
}

.game-item-card.locked {
  opacity: 0.4;
  filter: grayscale(1) blur(1px);
  cursor: not-allowed;
}

.game-item-card.locked::before {
  content: "üîê LOCKED";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-weight: bold;
  font-size: 1.2rem;
  z-index: 10;
  animation: unlock-burst 0.5s ease-out;
}

.game-item-card.unlocking {
  animation: unlock-burst 0.5s ease-out;
}

/* ============= GAME BUTTONS - ASSET-LIKE ============= */

.game-button {
  position: relative;
  padding: 0.75rem 1.5rem;
  border-radius: 0.25rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
  overflow: hidden;
  box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.3);
  transform: translateY(0);
}

.fantasy-mode:not(.dark) .game-button {
  background: linear-gradient(135deg, var(--fantasy-light-primary), var(--fantasy-light-accent));
  color: white;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}

.fantasy-mode.dark .game-button {
  background: linear-gradient(135deg, var(--fantasy-dark-primary), var(--fantasy-dark-accent));
  color: white;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
}

.game-button:hover {
  transform: translateY(-4px);
  box-shadow: 6px 6px 0px rgba(0, 0, 0, 0.4), 0 0 20px currentColor;
}

.game-button:active {
  transform: translateY(-2px);
  box-shadow: 2px 2px 0px rgba(0, 0, 0, 0.3);
}

.game-button::before {
  content: "";
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  transition: left 0.5s ease;
}

.game-button:hover::before {
  left: 100%;
}

/* ============= MODAL/PORTAL EFFECTS ============= */

.portal-entry {
  position: relative;
  border-radius: 50%;
  overflow: hidden;
  animation: item-bounce 2s ease-in-out infinite;
}

.fantasy-mode:not(.dark) .portal-entry {
  background: radial-gradient(circle, var(--fantasy-light-fairy-cyan), var(--fantasy-light-fairy-purple), transparent);
  box-shadow: 0 0 30px var(--fantasy-light-fairy-cyan), inset 0 0 30px var(--fantasy-light-fairy-cyan);
}

.fantasy-mode.dark .portal-entry {
  background: radial-gradient(circle, var(--fantasy-dark-blood-red), var(--fantasy-dark-purple), transparent);
  box-shadow: 0 0 30px var(--fantasy-dark-blood-red), inset 0 0 30px var(--fantasy-dark-blood-red);
}

/* ============= NARRATIVE TEXT ============= */

.fantasy-narrative {
  font-size: 1.1rem;
  line-height: 1.8;
  font-weight: 500;
}

.fantasy-mode:not(.dark) .fantasy-narrative {
  color: var(--fantasy-light-primary);
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.fantasy-mode.dark .fantasy-narrative {
  color: var(--fantasy-dark-accent);
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
}

/* ============= PAGE TRANSITION ============= */

.realm-transition {
  animation: chaos-shake 0.4s ease-out;
}

/* Adding extreme parallax, distortion, chromatic aberration, and advanced visual effects */

/* ============= PARALLAX WORLD LAYERS ============= */

.parallax-layer {
  position: fixed;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  pointer-events: none;
  z-index: -5;
}

.parallax-layer.far {
  transform: translateZ(-200px) scale(1.2);
}

.parallax-layer.mid {
  transform: translateZ(-100px) scale(1.1);
}

.parallax-layer.near {
  transform: translateZ(-50px) scale(1.05);
}

/* ============= DISTORTION EFFECT - DARK MODE ============= */

.fantasy-mode.dark .distortion-layer {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -3;
  background: url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.02' numOctaves='4' result='noise'/%3E%3CfeDisplacementMap in='SourceGraphic' in2='noise' scale='30'/%3E%3C/filter%3E%3Crect width='100' height='100' filter='url(%23noise)' fill='%23000'/%3E%3C/svg%3E");
  opacity: 0.15;
  animation: distort-shift 8s ease-in-out infinite;
}

@keyframes distort-shift {
  0%,
  100% {
    filter: blur(0px) contrast(1);
  }
  50% {
    filter: blur(1px) contrast(1.05);
  }
}

/* ============= CHROMATIC ABERRATION - DARK MODE ============= */

.fantasy-mode.dark {
  --chromatic-offset: 2px;
}

.fantasy-mode.dark .chromatic-aberration {
  position: relative;
}

.fantasy-mode.dark .chromatic-aberration::before,
.fantasy-mode.dark .chromatic-aberration::after {
  content: attr(data-content);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  opacity: 0.1;
  pointer-events: none;
}

.fantasy-mode.dark .chromatic-aberration::before {
  color: #ff0000;
  transform: translateX(var(--chromatic-offset)) translateY(calc(var(--chromatic-offset) * -1));
  animation: chromatic-shift 0.1s ease-in-out;
}

.fantasy-mode.dark .chromatic-aberration::after {
  color: #0099ff;
  transform: translateX(calc(var(--chromatic-offset) * -1)) translateY(var(--chromatic-offset));
  animation: chromatic-shift 0.1s ease-in-out;
}

@keyframes chromatic-shift {
  0%,
  100% {
    opacity: 0.05;
  }
  50% {
    opacity: 0.15;
  }
}

/* ============= FLOATING FAIRIES - LIGHT MODE ============= */

.fairy-realm-background {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -4;
  overflow: hidden;
}

.fairy {
  position: absolute;
  font-size: 2.5rem;
  animation: fairy-flight 12s cubic-bezier(0.45, 0.05, 0.55, 0.95) infinite;
  filter: drop-shadow(0 0 10px rgba(0, 217, 255, 0.6)) drop-shadow(0 0 20px rgba(181, 23, 158, 0.3));
}

.fairy.fairy-1 {
  top: 10%;
  left: 5%;
  animation-duration: 14s;
  animation-delay: 0s;
}

.fairy.fairy-2 {
  top: 20%;
  right: 15%;
  animation-duration: 16s;
  animation-delay: -2s;
}

.fairy.fairy-3 {
  top: 50%;
  right: 5%;
  animation-duration: 18s;
  animation-delay: -4s;
}

.fairy.fairy-4 {
  bottom: 20%;
  left: 10%;
  animation-duration: 15s;
  animation-delay: -1s;
}

@keyframes fairy-flight {
  0% {
    transform: translateY(0px) translateX(0px) rotate(0deg) scale(1);
    opacity: 0.8;
  }
  25% {
    transform: translateY(-80px) translateX(60px) rotate(45deg) scale(1.1);
    opacity: 1;
  }
  50% {
    transform: translateY(-150px) translateX(-40px) rotate(180deg) scale(1);
    opacity: 0.9;
  }
  75% {
    transform: translateY(-50px) translateX(100px) rotate(270deg) scale(1.1);
    opacity: 1;
  }
  100% {
    transform: translateY(0px) translateX(0px) rotate(360deg) scale(1);
    opacity: 0.8;
  }
}

/* ============= BLOOD DRIP RAIN - DARK MODE ============= */

.blood-rain {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -2;
}

.blood-drop {
  position: absolute;
  width: 3px;
  height: 30px;
  background: linear-gradient(to bottom, #ff0000, #8b0000, transparent);
  opacity: 0.6;
  animation: blood-fall 3s linear infinite;
  border-radius: 50%;
}

@keyframes blood-fall {
  0% {
    transform: translateY(-100px);
    opacity: 0;
  }
  10% {
    opacity: 0.6;
  }
  90% {
    opacity: 0.6;
  }
  100% {
    transform: translateY(100vh);
    opacity: 0;
  }
}

/* ============= GLITCH EFFECT FOR DARK MODE TEXT ============= */

.glitch-text {
  position: relative;
}

.fantasy-mode.dark .glitch-text::before,
.fantasy-mode.dark .glitch-text::after {
  content: attr(data-text);
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
}

.fantasy-mode.dark .glitch-text::before {
  animation: glitch-y 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite;
  color: #ff0000;
  z-index: -1;
  text-shadow: -2px 0 #00ff00;
}

.fantasy-mode.dark .glitch-text::after {
  animation: glitch-x 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite reverse;
  color: #0099ff;
  z-index: -2;
  text-shadow: 2px 0 #ff0000;
}

@keyframes glitch-x {
  0% {
    clip-path: polygon(0 0, 100% 0, 100% 0.3%, 0 0.3%);
    transform: translate(0);
  }
  20% {
    clip-path: polygon(0 5%, 100% 5%, 100% 10%, 0 10%);
    transform: translate(-2px, 2px);
  }
  40% {
    clip-path: polygon(0 10%, 100% 10%, 100% 15%, 0 15%);
    transform: translate(2px, -2px);
  }
  60% {
    clip-path: polygon(0 50%, 100% 50%, 100% 55%, 0 55%);
    transform: translate(-1px, 1px);
  }
  80% {
    clip-path: polygon(0 80%, 100% 80%, 100% 85%, 0 85%);
    transform: translate(1px, -1px);
  }
  100% {
    clip-path: polygon(0 100%, 100% 100%, 100% 100%, 0 100%);
    transform: translate(0);
  }
}

@keyframes glitch-y {
  0% {
    clip-path: polygon(0 0, 0.3% 0, 0.3% 100%, 0 100%);
    transform: translate(0);
  }
  20% {
    clip-path: polygon(5% 0, 10% 0, 10% 100%, 5% 100%);
    transform: translate(2px, -2px);
  }
  40% {
    clip-path: polygon(30% 0, 35% 0, 35% 100%, 30% 100%);
    transform: translate(-2px, 2px);
  }
  60% {
    clip-path: polygon(50% 0, 55% 0, 55% 100%, 50% 100%);
    transform: translate(1px, -1px);
  }
  80% {
    clip-path: polygon(80% 0, 85% 0, 85% 100%, 80% 100%);
    transform: translate(-1px, 1px);
  }
  100% {
    clip-path: polygon(100% 0, 100% 0, 100% 100%, 100% 100%);
    transform: translate(0);
  }
}

/* ============= ENHANCED GLOW EFFECTS ============= */

.glow-aura-light {
  position: relative;
}

.fantasy-mode:not(.dark) .glow-aura-light::before {
  content: "";
  position: absolute;
  inset: -8px;
  border-radius: inherit;
  background: radial-gradient(circle, rgba(0, 217, 255, 0.3), transparent 70%);
  animation: aura-pulse-light 3s ease-in-out infinite;
  pointer-events: none;
}

@keyframes aura-pulse-light {
  0%,
  100% {
    opacity: 0.5;
    filter: blur(8px);
  }
  50% {
    opacity: 1;
    filter: blur(12px);
  }
}

.glow-aura-dark {
  position: relative;
}

.fantasy-mode.dark .glow-aura-dark::before {
  content: "";
  position: absolute;
  inset: -8px;
  border-radius: inherit;
  background: radial-gradient(circle, rgba(255, 0, 0, 0.4), transparent 70%);
  animation: aura-pulse-dark 2s ease-in-out infinite;
  pointer-events: none;
}

@keyframes aura-pulse-dark {
  0%,
  100% {
    opacity: 0.4;
    filter: blur(8px);
  }
  50% {
    opacity: 0.8;
    filter: blur(15px);
  }
}

/* ============= REALM CARD GAME STATE EFFECTS ============= */

.realm-card-unlocked {
  animation: unlock-explosion 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes unlock-explosion {
  0% {
    transform: scale(0.8) rotate(0deg);
    opacity: 0;
  }
  50% {
    transform: scale(1.15) rotate(15deg);
  }
  100% {
    transform: scale(1) rotate(0deg);
    opacity: 1;
  }
}

.realm-card-locked {
  animation: locked-pulse 2s ease-in-out infinite;
}

@keyframes locked-pulse {
  0%,
  100% {
    transform: scale(1);
    filter: brightness(0.7);
  }
  50% {
    transform: scale(0.98);
    filter: brightness(0.5);
  }
}

/* ============= SMOOTH MAGICAL JOURNEY LIGHT MODE ============= */

.fantasy-mode:not(.dark) .realm-card,
.fantasy-mode:not(.dark) .game-item-card {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.85), rgba(197, 125, 255, 0.15));
  backdrop-filter: blur(10px);
  border: 2px solid rgba(0, 217, 255, 0.4);
  box-shadow: 0 8px 32px rgba(0, 217, 255, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.4);
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.fantasy-mode:not(.dark) .realm-card:hover,
.fantasy-mode:not(.dark) .game-item-card:hover {
  transform: translateY(-8px) scale(1.02);
  box-shadow: 0 20px 48px rgba(0, 217, 255, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.6);
  border-color: rgba(0, 217, 255, 0.7);
}

/* ============= CURSED DARK MODE CARDS ============= */

.fantasy-mode.dark .realm-card,
.fantasy-mode.dark .game-item-card {
  background: linear-gradient(135deg, rgba(30, 0, 15, 0.95), rgba(139, 0, 0, 0.15));
  backdrop-filter: blur(10px);
  border: 2px solid rgba(255, 0, 0, 0.5);
  box-shadow: 0 8px 32px rgba(255, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.05);
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  position: relative;
  overflow: hidden;
}

.fantasy-mode.dark .realm-card::before,
.fantasy-mode.dark .game-item-card::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(45deg, transparent 30%, rgba(255, 0, 0, 0.1) 50%, transparent 70%);
  animation: cursed-shimmer 3s linear infinite;
  pointer-events: none;
}

@keyframes cursed-shimmer {
  0% {
    transform: translateX(-200%) translateY(-200%);
  }
  100% {
    transform: translateX(200%) translateY(200%);
  }
}

.fantasy-mode.dark .realm-card:hover,
.fantasy-mode.dark .game-item-card:hover {
  transform: translateY(-8px) scale(1.02);
  box-shadow: 0 20px 48px rgba(255, 0, 0, 0.4), 0 0 30px rgba(139, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 0, 0, 0.8);
}

/* ============= RESPONSIVE ADJUSTMENTS ============= */

@media (max-width: 768px) {
  .fairy {
    font-size: 2rem;
  }

  .game-button {
    padding: 0.6rem 1rem;
    font-size: 0.85rem;
  }

  .game-item-card {
    padding: 1rem;
  }
}
